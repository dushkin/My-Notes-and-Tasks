<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ContentEditor Test</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
        }
    </script>
</head>
<body class="bg-white dark:bg-gray-900">
    <div class="p-8">
        <h1 class="text-2xl font-bold mb-4 text-gray-900 dark:text-white">ContentEditor Component Test</h1>
        
        <!-- Light Mode Test -->
        <div class="mb-8 p-4 border rounded-lg bg-white">
            <h2 class="text-lg font-semibold mb-4 text-gray-900">Light Mode</h2>
            <div id="light-mode-test"></div>
        </div>
        
        <!-- Dark Mode Test -->
        <div class="mb-8 p-4 border rounded-lg bg-gray-900 dark">
            <h2 class="text-lg font-semibold mb-4 text-white">Dark Mode</h2>
            <div id="dark-mode-test"></div>
        </div>
        
        <!-- Toggle Button -->
        <button id="toggle-theme" class="px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600">
            Toggle Dark Mode
        </button>
    </div>

    <script type="text/babel">
        const { useState, useEffect, useCallback, useRef, memo, useMemo } = React;

        // Mock formatTimestamp function
        const formatTimestamp = (isoString) => {
            const date = new Date(isoString);
            return new Intl.DateTimeFormat("default", {
                year: "numeric",
                month: "short",
                day: "numeric",
                hour: "numeric",
                minute: "numeric",
                hour12: true,
            }).format(date);
        };

        // Mock formatRemainingTime function
        const formatRemainingTime = (timestamp) => {
            return "in 2 hours";
        };

        // Mock getReminder function
        const getReminder = (id) => {
            return { timestamp: Date.now() + 7200000 }; // 2 hours from now
        };

        // Simplified ContentEditor component for testing
        const ContentEditor = ({ item }) => {
            const [isReminderDialogOpen, setIsReminderDialogOpen] = useState(false);
            const currentReminder = getReminder(item.id);

            return (
                <div className="h-full flex flex-col">
                    {/* Metadata Section */}
                    <div className="flex items-center justify-between mb-2">
                        <div className="flex items-center space-x-2 text-xs text-zinc-500 dark:text-zinc-400">
                            <span><span className="text-blue-600 dark:text-blue-400">Created</span> {formatTimestamp(item.createdAt)}</span>
                            <span><span className="text-orange-600 dark:text-orange-400">Last Modified</span> {formatTimestamp(item.updatedAt)}</span>
                            {/* Bell icon link */}
                            <a
                                href="#"
                                onClick={(e) => {
                                    e.preventDefault();
                                    setIsReminderDialogOpen(true);
                                }}
                                className="text-green-500 hover:underline flex items-center"
                            >
                                <svg
                                    xmlns="http://www.w3.org/2000/svg"
                                    width="16"
                                    height="16"
                                    viewBox="0 0 24 24"
                                    fill="none"
                                    stroke="currentColor"
                                    strokeWidth="2"
                                    strokeLinecap="round"
                                    strokeLinejoin="round"
                                    className="mr-1"
                                >
                                    <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9" />
                                    <path d="M13.73 21a2 2 0 0 1-3.46 0" />
                                </svg>
                                Set Reminder
                                {currentReminder && (
                                    <span className="ml-2 text-green-600 dark:text-green-400 text-xs">
                                        ({formatRemainingTime(currentReminder.timestamp)})
                                    </span>
                                )}
                            </a>
                        </div>
                    </div>
                    <div className="text-xs text-zinc-500 dark:text-zinc-400 mb-3 space-y-0.5">
                        <p>This is a test of the ContentEditor component metadata section.</p>
                        <p>Check the colored labels and bell icon clarity.</p>
                    </div>
                    {isReminderDialogOpen && (
                        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
                            <div className="bg-white dark:bg-gray-800 p-6 rounded-lg">
                                <h3 className="text-lg font-semibold mb-4 text-gray-900 dark:text-white">Set Reminder</h3>
                                <p className="text-gray-600 dark:text-gray-300 mb-4">Reminder dialog opened successfully!</p>
                                <button 
                                    onClick={() => setIsReminderDialogOpen(false)}
                                    className="px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600"
                                >
                                    Close
                                </button>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        // Mock item data
        const mockItem = {
            id: "test-item-1",
            createdAt: "2024-01-15T10:30:00Z",
            updatedAt: "2024-01-16T14:45:00Z",
            content: "Test content"
        };

        // Render components
        ReactDOM.render(<ContentEditor item={mockItem} />, document.getElementById('light-mode-test'));
        ReactDOM.render(<ContentEditor item={mockItem} />, document.getElementById('dark-mode-test'));

        // Theme toggle functionality
        document.getElementById('toggle-theme').addEventListener('click', () => {
            document.body.classList.toggle('dark');
        });
    </script>
</body>
</html>
